---
# file: operations/check-env.yml
# 
# This playbook performs a number of status checks on the environment
#

#
#  Server Ping
#
# Do an "ansible ping" to all servers, to makes sure they are reachable
#

- name: "#1 Do ansible 'ping' to test connectivity"
  ansible.builtin.import_playbook: checks/ping.yml

- name: "#2 Check to see that the app(s) are reachable via http"
  ansible.builtin.import_playbook: checks/check-is-app-working.yml
  tags: connectivity

- name: "#3 Check to see that the paz lb can contact each proxy"
  ansible.builtin.import_playbook: checks/check-pazlb-proxy.yml
  tags: connectivity

- name: "#4 Check to see that the each proxy can reach each app"
  ansible.builtin.import_playbook: checks/check-proxy-apptier.yml
  tags: connectivity

- name: "#5 Check to see that the the apps lb can contact each app server"
  ansible.builtin.import_playbook: checks/check-appslb-apps.yml
  tags: connectivity